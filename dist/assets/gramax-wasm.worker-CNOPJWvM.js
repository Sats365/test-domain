function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M={exports:{}},a=M.exports={},o,s;function g(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=g}catch{o=g}try{typeof clearTimeout=="function"?s=clearTimeout:s=_}catch{s=_}})();function x(e){if(o===setTimeout)return setTimeout(e,0);if((o===g||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch{try{return o.call(null,e,0)}catch{return o.call(this,e,0)}}}function k(e){if(s===clearTimeout)return clearTimeout(e);if((s===_||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch{try{return s.call(null,e)}catch{return s.call(this,e)}}}var i=[],c=!1,u,m=-1;function N(){!c||!u||(c=!1,u.length?i=u.concat(i):m=-1,i.length&&E())}function E(){if(!c){var e=x(N);c=!0;for(var t=i.length;t;){for(u=i,i=[];++m<t;)u&&u[m].run();m=-1,t=i.length}u=null,c=!1,k(e)}}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new j(e,t)),i.length===1&&!c&&x(E)};function j(e,t){this.fun=e,this.array=t}j.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};function l(){}a.on=l;a.addListener=l;a.once=l;a.off=l;a.removeListener=l;a.removeAllListeners=l;a.emit=l;a.prependListener=l;a.prependOnceListener=l;a.listeners=function(e){return[]};a.binding=function(e){throw new Error("process.binding is not supported")};a.cwd=function(){return"/"};a.chdir=function(e){throw new Error("process.chdir is not supported")};a.umask=function(){return 0};var P=M.exports;const h=I(P),p=globalThis||void 0||self;var r={},O=typeof h=="object"&&typeof h.versions=="object"&&typeof h.versions.node=="string";if(O){const{createRequire:e}=await Promise.resolve().then(function(){return R});var f=e(import.meta.url),T=f("worker_threads"),y=T.parentPort;y.on("message",t=>onmessage({data:t}));var S=f("fs"),L=f("vm");Object.assign(p,{self:p,require:f,Module:r,location:{href:typeof __filename<"u"?__filename:import.meta.url},Worker:T.Worker,importScripts:t=>L.runInThisContext(S.readFileSync(t,"utf8"),{filename:t}),postMessage:t=>y.postMessage(t),performance:p.performance||{now:Date.now}})}var v=!1;function A(...e){var t=e.join(" ");if(O){S.writeSync(2,t+`
`);return}console.error(t)}function C(...e){var t=e.join(" ");postMessage({cmd:"alert",text:t,threadId:r._pthread_self()})}var b=A;self.alert=C;r.instantiateWasm=(e,t)=>{var n=r.wasmModule;r.wasmModule=null;var d=new WebAssembly.Instance(n,e);return t(d)};self.onunhandledrejection=e=>{throw e.reason||e};function w(e){try{if(e.data.cmd==="load"){let t=[];self.onmessage=n=>t.push(n),self.startWorker=n=>{r=n,postMessage({cmd:"loaded"});for(let d of t)w(d);self.onmessage=w},r.wasmModule=e.data.wasmModule;for(const n of e.data.handlers)r[n]=(...d)=>{postMessage({cmd:"callHandler",handler:n,args:d})};r.wasmMemory=e.data.wasmMemory,r.buffer=r.wasmMemory.buffer,r.ENVIRONMENT_IS_PTHREAD=!0,(e.data.urlOrBlob?import(e.data.urlOrBlob):import("./gramax-wasm-BZ0Y1jqj.js")).then(n=>n.default(r))}else if(e.data.cmd==="run"){r.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),r.__emscripten_thread_mailbox_await(e.data.pthread_ptr),r.establishStackSpace(),r.PThread.receiveObjectTransfer(e.data),r.PThread.threadInitTLS(),v||(v=!0);try{r.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(t){if(t!="unwind")throw t}}else e.data.cmd==="cancel"?r._pthread_self()&&r.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?v&&r.checkMailbox():e.data.cmd&&(b(`worker.js received unknown command ${e.data.cmd}`),b(e.data)))}catch(t){throw r.__emscripten_thread_crashed?.(),t}}self.onmessage=w;var R=Object.freeze({__proto__:null});export{R as e,p as g,h as p};
